{% extends "base.html" %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">ðŸ“– Lista de Livros</h2>
    <form class="d-flex" method="get" action="{{ url_for('listar') }}">
      <select class="form-select me-2" name="categoria">
        <option value="">Todas as categorias</option>
        {% for c in categorias %}
          <option value="{{ c }}" {% if categoria_atual == c %}selected{% endif %}>{{ c }}</option>
        {% endfor %}
      </select>
      <button class="btn btn-primary" type="submit">Filtrar</button>
    </form>
  </div>

  {% if livros|length == 0 %}
    <div class="alert alert-info">Nenhum livro encontrado.</div>
  {% else %}
  <div class="table-responsive">
    <table class="table table-striped align-middle">
      <thead>
        <tr>
          <th>ID</th>
          <th>TÃ­tulo</th>
          <th>Autor</th>
          <th>Categoria</th>
          <th>DisponÃ­vel</th>
          <th style="width: 200px;">AÃ§Ãµes</th>
        </tr>
      </thead>
      <tbody>
        {% for livro in livros %}
        <tr>
          <td>{{ livro[0] }}</td>
          <td>{{ livro[1] }}</td>
          <td>{{ livro[2] }}</td>
          <td>{{ livro[3] }}</td>
          <td>
            {% if livro[4] == 1 %}
              <span class="badge bg-success">Sim</span>
            {% else %}
              <span class="badge bg-secondary">NÃ£o</span>
            {% endif %}
          </td>
          <td>
            <a href="{{ url_for('editar', id=livro[0]) }}" class="btn btn-warning btn-sm">Editar</a>
            <form action="{{ url_for('deletar', id=livro[0]) }}" method="post" style="display:inline;">
              <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Tem certeza que deseja excluir este livro?')">Excluir</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}
{% endblock %}